<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />
    <title><%= title %></title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body>
    <div class="relative flex size-full min-h-screen flex-col bg-[#f9f8fc] group/design-root overflow-x-hidden" style='font-family: Inter, "Noto Sans", sans-serif;'>
        <div class="layout-container flex h-full grow flex-col">
            <!-- Header -->
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#eae7f3] px-10 py-3">
                <div class="flex items-center gap-4 text-[#110e1b]">
                    <a href="/" class="text-[#110e1b] text-lg font-bold leading-tight tracking-[-0.015em]">my-cool.space</a>
                </div>
                <div class="flex flex-1 justify-end gap-8">
                    <div class="flex items-center gap-9"></div>
                    <div class="flex gap-2">
                        <a href="/dashboard" 
                           class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#4c19e5] text-[#f9f8fc] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
                            <span class="truncate">Dashboard</span>
                        </a>
                        <a href="/auth/logout"
                           class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#eae7f3] text-[#110e1b] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
                            <span class="truncate">Logout</span>
                        </a>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <div class="flex flex-1 justify-center py-5">
                <div class="layout-content-container flex flex-col max-w-[960px] flex-1 px-10">
                    <div class="flex min-h-[480px] flex-col gap-6 items-center justify-center p-4">
                        <!-- Success Icon -->
                        <div class="text-green-600" data-icon="CheckCircle" data-size="64px" data-weight="regular">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64px" height="64px" fill="currentColor" viewBox="0 0 256 256">
                                <path d="M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"></path>
                            </svg>
                        </div>

                        <!-- Success Message -->
                        <div class="flex flex-col gap-2 text-center">
                            <h1 class="text-[#110e1b] text-4xl font-black leading-tight tracking-[-0.033em]">
                                üéâ Subdomain Created Successfully!
                            </h1>
                            <h2 class="text-[#604e97] text-base font-normal leading-normal">
                                Your new subdomain is ready and configured
                            </h2>
                        </div>

                        <% if (subdomain) { %>
                            <!-- Subdomain Display -->
                            <div class="rounded-xl border border-[#d6d0e7] bg-[#f9f8fc] p-6 w-full max-w-2xl">
                                <div class="flex flex-col gap-4 text-center">
                                    <h3 class="text-[#110e1b] text-xl font-bold leading-tight tracking-[-0.015em]">Your new subdomain:</h3>
                                    <div class="rounded-lg border border-green-200 bg-green-50 p-4">
                                        <code class="text-2xl font-mono text-green-800"><%= subdomain %>.my-cool.space</code>
                                    </div>
                                </div>
                            </div>

                            <!-- Information Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-2xl">
                                <div class="rounded-lg border border-blue-200 bg-blue-50 p-4">
                                    <h3 class="font-bold text-blue-800 mb-2">üìã What happens next?</h3>
                                    <ul class="text-sm text-blue-700 space-y-1">
                                        <li>‚Ä¢ DNS records are propagating</li>
                                        <li>‚Ä¢ Usually takes 5-15 minutes</li>
                                        <li>‚Ä¢ Start using immediately</li>
                                        <li>‚Ä¢ Redirects to your target URL</li>
                                    </ul>
                                </div>

                                <div class="rounded-lg border border-yellow-200 bg-yellow-50 p-4">
                                    <h3 class="font-bold text-yellow-800 mb-2">‚ö†Ô∏è Important Notes</h3>
                                    <ul class="text-sm text-yellow-700 space-y-1">
                                        <li>‚Ä¢ Full propagation: up to 24 hours</li>
                                        <li>‚Ä¢ Ensure target URL works</li>
                                        <li>‚Ä¢ Contact support for changes</li>
                                        <li>‚Ä¢ Subject to fair use policies</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex gap-3">
                                <a href="http://<%= subdomain %>.my-cool.space" 
                                   target="_blank"
                                   class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-green-600 text-white text-sm font-bold leading-normal tracking-[0.015em]">
                                    <div class="text-white mr-2" data-icon="Globe" data-size="16px" data-weight="regular">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="currentColor" viewBox="0 0 256 256">
                                            <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM101.63,168h52.74C149,186.34,140,202.87,128,215.89,116,202.87,107,186.34,101.63,168ZM98,152a145.72,145.72,0,0,1,0-48h60a145.72,145.72,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.79a161.79,161.79,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154.37,88H101.63C107,69.66,116,53.13,128,40.11,140,53.13,149,69.66,154.37,88Zm19.84,16h38.46a88.15,88.15,0,0,1,0,48H174.21a161.79,161.79,0,0,0,0-48Zm32.16-16H170.94a142.39,142.39,0,0,0-20.26-45A88.37,88.37,0,0,1,206.37,88ZM105.32,43A142.39,142.39,0,0,0,85.06,88H49.63A88.37,88.37,0,0,1,105.32,43ZM49.63,168H85.06a142.39,142.39,0,0,0,20.26,45A88.37,88.37,0,0,1,49.63,168Zm101.05,45a142.39,142.39,0,0,0,20.26-45h35.43A88.37,88.37,0,0,1,150.68,213Z"></path>
                                        </svg>
                                    </div>
                                    <span class="truncate">Visit Subdomain</span>
                                </a>
                                <a href="/dashboard" 
                                   class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#4c19e5] text-[#f9f8fc] text-sm font-bold leading-normal tracking-[0.015em]">
                                    <span class="truncate">Back to Dashboard</span>
                                </a>
                            </div>

                            <!-- DNS Testing Tool -->
                            <div class="rounded-xl border border-[#d6d0e7] bg-[#f9f8fc] p-6 w-full max-w-2xl">
                                <h3 class="text-[#110e1b] text-xl font-bold leading-tight tracking-[-0.015em] mb-4">üîç DNS Propagation Checker</h3>
                                <p class="text-[#604e97] text-base font-normal leading-normal mb-4">Check if your subdomain is working correctly:</p>
                                
                                <div class="space-y-4">
                                    <button onclick="checkDNS()" 
                                            class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-blue-600 text-white text-sm font-bold leading-normal tracking-[0.015em]">
                                        <span class="truncate">Test DNS Resolution</span>
                                    </button>
                                    
                                    <div id="dnsResult" class="hidden">
                                        <div id="dnsLoading" class="text-center py-4">
                                            <div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
                                            <p class="mt-2 text-[#604e97]">Checking DNS...</p>
                                        </div>
                                        <div id="dnsSuccess" class="hidden rounded-lg border border-green-200 bg-green-50 p-4">
                                            <h4 class="font-bold text-green-800">‚úÖ DNS is working!</h4>
                                            <p class="text-green-700">Your subdomain is resolving correctly.</p>
                                        </div>
                                        <div id="dnsError" class="hidden rounded-lg border border-yellow-200 bg-yellow-50 p-4">
                                            <h4 class="font-bold text-yellow-800">‚è≥ Still propagating</h4>
                                            <p class="text-yellow-700">DNS changes are still propagating. Please try again in a few minutes.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        <% } else { %>
                            <div class="rounded-xl border border-[#d6d0e7] bg-[#f9f8fc] p-6 w-full max-w-2xl text-center">
                                <p class="text-[#604e97] text-lg font-normal leading-normal mb-6">
                                    Your subdomain request has been approved and is being processed.
                                </p>
                                <a href="/dashboard" 
                                   class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#4c19e5] text-[#f9f8fc] text-sm font-bold leading-normal tracking-[0.015em] mx-auto">
                                    <span class="truncate">Back to Dashboard</span>
                                </a>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="flex justify-center">
                <div class="flex max-w-[960px] flex-1 flex-col">
                    <footer class="flex flex-col gap-6 px-5 py-10 text-center @container">
                        <p class="text-[#604e97] text-base font-normal leading-normal">¬© 2025 my-cool.space. Made with ‚ù§Ô∏è for the community.</p>
                    </footer>
                </div>
            </footer>
        </div>
    </div>

    <script>
        <% if (subdomain) { %>
        async function checkDNS() {
            const subdomain = '<%= subdomain %>';
            const result = document.getElementById('dnsResult');
            const loading = document.getElementById('dnsLoading');
            const success = document.getElementById('dnsSuccess');
            const error = document.getElementById('dnsError');
            
            // Show loading
            result.classList.remove('hidden');
            loading.classList.remove('hidden');
            success.classList.add('hidden');
            error.classList.add('hidden');
            
            try {
                // Try to fetch the subdomain
                const response = await fetch(`http://${subdomain}.my-cool.space`, {
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                
                // If we get here without error, DNS is likely working
                setTimeout(() => {
                    loading.classList.add('hidden');
                    success.classList.remove('hidden');
                }, 1000);
                
            } catch (error) {
                setTimeout(() => {
                    loading.classList.add('hidden');
                    error.classList.remove('hidden');
                }, 1000);
            }
        }
        <% } %>
    </script>
</body>
</html>
