<!DOCTYPE html>
<html>
<head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />
    <title>Report Abuse - my-cool.space</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body>
    <div class="relative flex size-full min-h-screen flex-col bg-[#f9f8fc] group/design-root overflow-x-hidden" style='font-family: Inter, "Noto Sans", sans-serif;'>
        <div class="layout-container flex h-full grow flex-col">
            <!-- Header -->
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#eae7f3] px-10 py-3">
                <div class="flex items-center gap-4 text-[#110e1b]">
                    <a href="/" class="text-[#110e1b] text-lg font-bold leading-tight tracking-[-0.015em]">my-cool.space</a>
                </div>
                <div class="flex flex-1 justify-end gap-8">
                    <div class="flex gap-2">
                        <a href="/" 
                           class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#eae7f3] text-[#110e1b] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
                            <span class="truncate">Home</span>
                        </a>
                        <a href="/report-abuse" 
                           class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#4c19e5] text-[#f9f8fc] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
                            <span class="truncate">Report Abuse</span>
                        </a>
                        <% if (user) { %>
                        <a href="/dashboard" 
                           class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#eae7f3] text-[#110e1b] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5">
                            <span class="truncate">Dashboard</span>
                        </a>
                        <% } %>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <div class="flex flex-1 justify-center py-5">
                <div class="layout-content-container flex flex-col max-w-[960px] flex-1 px-10">
                    <div class="flex flex-col gap-6 py-8">
                        <!-- Header -->
                        <div class="flex flex-col gap-2 text-center">
                            <h1 class="text-[#110e1b] text-4xl font-black leading-tight tracking-[-0.033em]">
                                Report Abuse
                            </h1>
                            <p class="text-[#604e97] text-base font-normal leading-normal">
                                Help us maintain a safe and secure subdomain service
                            </p>
                        </div>

                        <!-- Information -->
                        <div class="rounded-lg border border-orange-200 bg-orange-50 p-4">
                            <h3 class="text-sm font-medium text-orange-800 mb-2">üõ°Ô∏è About Abuse Reports</h3>
                            <p class="text-sm text-orange-700 mb-2">
                                Please report any subdomains that are being used for illegal activities, spam, phishing, malware distribution, or other harmful purposes.
                            </p>
                            <p class="text-sm text-orange-700">
                                All reports are reviewed by our administrators and appropriate action will be taken.
                            </p>
                        </div>

                        <!-- Report Form -->
                        <div class="rounded-xl border border-[#d6d0e7] bg-[#f9f8fc] p-6">
                            <form id="abuseReportForm" class="flex flex-col gap-6">
                                
                                <!-- Reporter Email -->
                                <div class="flex flex-col gap-2">
                                    <label for="reporterEmail" class="text-[#110e1b] text-sm font-medium">
                                        Your Email Address *
                                    </label>
                                    <input 
                                        type="email" 
                                        id="reporterEmail" 
                                        name="reporterEmail"
                                        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#110e1b] focus:outline-0 focus:ring-0 border border-[#d6d0e7] bg-[#f9f8fc] focus:border-[#4c19e5] h-12 placeholder:text-[#604e97] p-3 text-sm font-normal leading-normal"
                                        placeholder="your@email.com"
                                        required
                                    />
                                    <p class="text-xs text-[#604e97]">We may contact you for additional information about this report</p>
                                </div>

                                <!-- Reported Subdomain -->
                                <div class="flex flex-col gap-2">
                                    <label for="reportedSubdomain" class="text-[#110e1b] text-sm font-medium">
                                        Subdomain Being Reported *
                                    </label>
                                    <input 
                                        type="text" 
                                        id="reportedSubdomain" 
                                        name="reportedSubdomain"
                                        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#110e1b] focus:outline-0 focus:ring-0 border border-[#d6d0e7] bg-[#f9f8fc] focus:border-[#4c19e5] h-12 placeholder:text-[#604e97] p-3 text-sm font-normal leading-normal"
                                        placeholder="example.my-cool.space"
                                        required
                                    />
                                </div>

                                <!-- Abuse Type -->
                                <div class="flex flex-col gap-2">
                                    <label for="abuseType" class="text-[#110e1b] text-sm font-medium">
                                        Type of Abuse *
                                    </label>
                                    <select 
                                        id="abuseType" 
                                        name="abuseType"
                                        class="form-select flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#110e1b] focus:outline-0 focus:ring-0 border border-[#d6d0e7] bg-[#f9f8fc] focus:border-[#4c19e5] h-12 placeholder:text-[#604e97] p-3 text-sm font-normal leading-normal"
                                        required
                                    >
                                        <option value="">Select abuse type...</option>
                                        <option value="spam">Spam</option>
                                        <option value="phishing">Phishing</option>
                                        <option value="malware">Malware Distribution</option>
                                        <option value="illegal_content">Illegal Content</option>
                                        <option value="copyright">Copyright Infringement</option>
                                        <option value="harassment">Harassment</option>
                                        <option value="fake_identity">Impersonation/Fake Identity</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>

                                <!-- Description -->
                                <div class="flex flex-col gap-2">
                                    <label for="description" class="text-[#110e1b] text-sm font-medium">
                                        Description of Abuse *
                                    </label>
                                    <textarea 
                                        id="description" 
                                        name="description"
                                        rows="5"
                                        class="form-textarea flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#110e1b] focus:outline-0 focus:ring-0 border border-[#d6d0e7] bg-[#f9f8fc] focus:border-[#4c19e5] placeholder:text-[#604e97] p-3 text-sm font-normal leading-normal"
                                        placeholder="Please provide detailed information about the abusive behavior you've observed..."
                                        required
                                    ></textarea>
                                    <p class="text-xs text-[#604e97]">Be as specific as possible. Include URLs, screenshots, or other evidence if available.</p>
                                </div>

                                <!-- Evidence URL -->
                                <div class="flex flex-col gap-2">
                                    <label for="evidenceUrl" class="text-[#110e1b] text-sm font-medium">
                                        Evidence URL (Optional)
                                    </label>
                                    <input 
                                        type="url" 
                                        id="evidenceUrl" 
                                        name="evidenceUrl"
                                        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#110e1b] focus:outline-0 focus:ring-0 border border-[#d6d0e7] bg-[#f9f8fc] focus:border-[#4c19e5] h-12 placeholder:text-[#604e97] p-3 text-sm font-normal leading-normal"
                                        placeholder="https://example.com/evidence"
                                    />
                                    <p class="text-xs text-[#604e97]">Link to screenshots, archives, or other evidence (upload to a file sharing service)</p>
                                </div>

                                <!-- Submit Button -->
                                <button 
                                    type="submit"
                                    class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 bg-[#4c19e5] text-[#f9f8fc] text-base font-bold leading-normal tracking-[0.015em] disabled:opacity-50 disabled:cursor-not-allowed"
                                    id="submitBtn"
                                >
                                    <span class="truncate">Submit Report</span>
                                </button>

                            </form>
                        </div>

                        <!-- Success/Error Messages -->
                        <div id="messageContainer" class="hidden">
                            <!-- Messages will be inserted here -->
                        </div>

                        <!-- Legal Notice -->
                        <div class="rounded-lg border border-gray-200 bg-gray-50 p-4">
                            <h3 class="text-sm font-medium text-gray-800 mb-2">üìã Legal Notice</h3>
                            <p class="text-sm text-gray-700 mb-2">
                                Filing false abuse reports is prohibited and may result in your own account being suspended.
                            </p>
                            <p class="text-sm text-gray-700">
                                By submitting this report, you affirm that the information provided is accurate to the best of your knowledge.
                            </p>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="flex justify-center">
                <div class="flex max-w-[960px] flex-1 flex-col">
                    <footer class="flex flex-col gap-6 px-5 py-10 text-center @container">
                        <p class="text-[#604e97] text-base font-normal leading-normal">¬© 2025 my-cool.space. All rights reserved.</p>
                    </footer>
                </div>
            </footer>
        </div>
    </div>

    <script>
        document.getElementById('abuseReportForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const messageContainer = document.getElementById('messageContainer');
            
            // Disable submit button
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="truncate">Submitting...</span>';
            
            // Get form data
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());
            
            try {
                const response = await fetch('/api/report-abuse', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    // Success
                    messageContainer.className = 'rounded-lg border border-green-200 bg-green-50 p-4';
                    messageContainer.innerHTML = `
                        <h3 class="text-sm font-medium text-green-800 mb-2">‚úÖ Report Submitted Successfully</h3>
                        <p class="text-sm text-green-700">
                            Thank you for your report. We will review it and take appropriate action if necessary. 
                            Your report ID is: <strong>${result.reportId}</strong>
                        </p>
                    `;
                    
                    // Reset form
                    this.reset();
                } else {
                    // Error
                    messageContainer.className = 'rounded-lg border border-red-200 bg-red-50 p-4';
                    messageContainer.innerHTML = `
                        <h3 class="text-sm font-medium text-red-800 mb-2">‚ùå Error</h3>
                        <p class="text-sm text-red-700">${result.error || 'Failed to submit report. Please try again.'}</p>
                    `;
                }
                
                messageContainer.classList.remove('hidden');
                messageContainer.scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                console.error('Error submitting report:', error);
                messageContainer.className = 'rounded-lg border border-red-200 bg-red-50 p-4';
                messageContainer.innerHTML = `
                    <h3 class="text-sm font-medium text-red-800 mb-2">‚ùå Network Error</h3>
                    <p class="text-sm text-red-700">Failed to connect to server. Please check your internet connection and try again.</p>
                `;
                messageContainer.classList.remove('hidden');
            }
            
            // Re-enable submit button
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<span class="truncate">Submit Report</span>';
        });
    </script>
</body>
</html>
